<!DOCTYPE html>
<html>
<head>
    <title>Notifikasi Persentase Baterai</title>
</head>
<body>

<p>Status Baterai: <span id="battery-status">Sedang mendeteksi...</span></p>

<script>
// Fungsi untuk mendeteksi status baterai
function detectBatteryStatus() {
    navigator.getBattery().then(function(battery) {
        updateBatteryStatus(battery);

        battery.addEventListener('chargingchange', function() {
            updateBatteryStatus(battery);
        });

        battery.addEventListener('levelchange', function() {
            updateBatteryStatus(battery);
        });
    });
}

// Fungsi untuk memperbarui tampilan status baterai
function updateBatteryStatus(battery) {
    var status = "Tidak Terdeteksi";
    if (battery.charging) {
        status = "Sedang Terisi";
    } else {
        status = "Tidak Terisi";
    }

    var level = (battery.level * 100).toFixed(2);
    document.getElementById('battery-status').textContent = "Status: " + status + ", Level: " + level + "%";

    // Jika level baterai mencapai 20%, kirim notifikasi
    if (level <= 70 && Notification.permission === "granted") {
        var notification = new Notification("Peringatan Baterai Rendah", {
            body: "Level baterai saat ini: " + level + "%"
        });
    }
}

// Meminta izin notifikasi
if ("Notification" in window) {
    Notification.requestPermission();
}

// Panggil fungsi deteksi saat halaman dimuat
detectBatteryStatus();
</script>

</body>
</html>
